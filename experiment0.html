<script src="lodash.min.js"></script>
<script src="p5.min.js"></script>
<script>
function setup()
{
    createCanvas(400, 400);

    background(0);

    drawPattern();
}

function drawPattern()
{
    stroke(255);
    noFill();

    let r = 125;
    let cx = width / 2;
    let cy = height / 2;

    circle(cx, cy, 2 * r);
    
    angleMode(DEGREES);

    let divisions = random(_.range(5, 14).filter(e => e % 2 == 1));

    let angle_interval = 360 / divisions;

    let px;
    let py;

    noFill();
    stroke(170);

    let angle;

    beginShape();
    for (var i of _.range(divisions).filter(e => e % 2 == 0)) {
        angle = i * angle_interval % 360;

        px = cos(angle) * r + cx;
        py = sin(angle) * r + cy;

        vertex(px, py);
    }
    for (var i of _.range(divisions).filter(e => e % 2 == 1)) {
        angle = i * angle_interval % 360;

        px = cos(angle) * r + cx;
        py = sin(angle) * r + cy;

        vertex(px, py);
    }
    endShape(CLOSE);

    let fill_color = color(247, 84, 59);

    fill(fill_color);
    stroke(fill_color);

    for (var i = 0; i < divisions; i ++) {
        angle = 2 * i * angle_interval;

        px = cos(angle) * r + cx;
        py = sin(angle) * r + cy;

        circle(px, py, 10);
    }
}

function draw()
{
}
</script>
